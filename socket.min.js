!function(n){function t(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return n[e].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){!function(t){t=t(this.WebSocket),n.exports=t;var r=document.getElementsByTagName("script"),e=r[r.length-1],i=e&&e.getAttribute("name");i&&(this[i]=t)}(function(n){function t(n,t,i){for(var o in t){var u=o.match(e);u&&(t[o]=function(t){return function(e){r(n,i[t],e)}}(u[1]))}}function r(n,t,r){if(t)for(var e=0;e<t.length;e++)t[e].call(n,r)}if(n){var e=/^on(.+)$/,i=function(r){var e=this,i=new n(r),o={},u={};this.close=function(){return i&&i.close(),i=null,e},this.connect=function(u){return i||(u&&(r=u),i=new n(r),t(e,i,o)),e},this.isAlive=function(){return!!i},this.on=function(n,t){if(!i)throw new Error("還沒建立連線");return"undefined"==typeof i["on"+n]?e:"function"!=typeof t?e:(o[n]||(o[n]=[]),o[n].push(t),e)},this.emit=function(n){if(!i)throw new Error("還沒建立連線");return"string"!=typeof n&&(n=JSON.stringify(n)),i.send(n)},this.listen=function(n,t){return u[n]||(u[n]=[]),u[n].push(t),e},this.unlisten=function(n){return u[n]&&(u[n]=[]),e},t(e,i,o),e.on("message",function(n){var t=n.data.match(/^(?:([^:]+):)?\s*([^\$]+)$/);if(t){var r=t[1],e=t[2];if(!r||!u[r])return;try{e=JSON.parse(e)}catch(n){}for(var i=0;i<u[r].length;i++)u[r][i](e,n)}})};return{connect:function(n){return new i(n)}}}})}]);