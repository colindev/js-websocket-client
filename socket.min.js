!function(n){function t(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return n[e].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){!function(t){var e=r(1);t=t(this.WebSocket),n.exports=t;var o=e("name");o&&(this[o]=t)}(function(n){function t(n,t,o){for(var i in t){var u=i.match(e);u&&(t[i]=function(t){return function(e){r(n,o[t],e)}}(u[1]))}}function r(n,t,r){if(t)for(var e=0;e<t.length;e++)t[e].call(n,r)}if(n){var e=/^on(.+)$/,o=function(r){var e=this,o=new n(r),i={},u={};this.close=function(){return o&&o.close(),o=null,e},this.connect=function(u){return o||(u&&(r=u),o=new n(r),t(e,o,i)),e},this.isAlive=function(){return!!o},this.on=function(n,t){if(!o)throw new Error("還沒建立連線");return"undefined"==typeof o["on"+n]?e:"function"!=typeof t?e:(i[n]||(i[n]=[]),i[n].push(t),e)},this.emit=function(n){if(!o)throw new Error("還沒建立連線");return"string"!=typeof n&&(n=JSON.stringify(n)),o.send(n)},this.listen=function(n,t){return u[n]||(u[n]=[]),u[n].push(t),e},this.unlisten=function(n){return u[n]&&(u[n]=[]),e},t(e,o,i),e.on("message",function(n){var t=n.data.match(/^(?:([^:]+):)?\s*([^\$]+)$/);if(t){var r=t[1],e=t[2];if(!r||!u[r])return;try{e=JSON.parse(e)}catch(n){}for(var o=0;o<u[r].length;o++)u[r][o](e,n)}}),e.on("close",function(){e.close()})};return{connect:function(n){return new o(n)}}}})},function(n,t){!function(t){n.exports=t()}(function(){return function(n){var t=document.getElementsByTagName("script"),r=t[t.length-1];return r?r.getAttribute(n):null}})}]);