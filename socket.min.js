!function(n){function t(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return n[e].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t){!function(n,t){function r(n,t,r){for(var o in t){var u=o.match(i);u&&(t[o]=function(t){return function(i){e(n,r[t],i)}}(u[1]))}}function e(n,t,r){if(t)for(var e=0;e<t.length;e++)t[e].call(n,r)}if(t){var i=/^on(.+)$/,o=function(n){var e=this,i=new t(n),o={},u={};this.close=function(){return i&&i.close(),i=null,e},this.connect=function(u){return i||(u&&(n=u),i=new t(n),r(e,i,o)),e},this.isAlive=function(){return!!i},this.on=function(n,t){if(!i)throw new Error("還沒建立連線");return"undefined"==typeof i["on"+n]?e:"function"!=typeof t?e:(o[n]||(o[n]=[]),o[n].push(t),e)},this.emit=function(n){if(!i)throw new Error("還沒建立連線");return"string"!=typeof n&&(n=JSON.stringify(n)),i.send(n)},this.listen=function(n,t){return u[n]||(u[n]=[]),u[n].push(t),e},this.unlisten=function(n){return u[n]&&(u[n]=[]),e},r(e,i,o),e.on("message",function(n){var t=n.data.match(/^(?:([^:]+):)?\s*([^\$]+)$/);if(t){var r=t[1],e=t[2];if(!r||!u[r])return;try{e=JSON.parse(e)}catch(n){}for(var i=0;i<u[r].length;i++)u[r][i](e,n)}})},u={connect:function(n){return new o(n)}},f=document.getElementsByTagName("script"),c=f[f.length-1],s=c&&c.getAttribute("name");s&&(n[s]=u)}}(self,self.WebSocket)}]);